{"version":3,"sources":["../../src/plugins/headings.js"],"names":["H1","H2","H3","H4","H5","H6","createNode","type","el","next","object","nodes","childNodes","HeadingsPlugin","props","DEFAULT_NODE","Plugin","createButton","icon","editorState","onChange","onClick","e","preventDefault","isActive","blocks","some","block","value","change","setBlocks","name","schema","toolbarButtons","deserialize","tagName","toLowerCase","serialize","children","style","textAlign","data","get","renderNode","node"],"mappings":"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","file":"headings.js","sourcesContent":["/*\r\n * This file is part of ORY Editor.\r\n *\r\n * ORY Editor is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Lesser General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * ORY Editor is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Lesser General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Lesser General Public License\r\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n * @license LGPL-3.0\r\n * @copyright 2016-2018 Aeneas Rekkas\r\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\r\n *\r\n */\r\n\r\n/* eslint-disable prefer-reflect, default-case, react/display-name */\r\nimport React from 'react'\r\nimport H1Icon from '@material-ui/icons/LooksOne'\r\nimport H2Icon from '@material-ui/icons/LooksTwo'\r\nimport H3Icon from '@material-ui/icons/Looks3'\r\nimport H4Icon from '@material-ui/icons/Looks4'\r\nimport H5Icon from '@material-ui/icons/Looks5'\r\nimport H6Icon from '@material-ui/icons/Looks6'\r\n// import { Data } from 'slate'\r\nimport { makeTagNode, ToolbarButton } from '../helpers'\r\nimport Plugin from './Plugin'\r\nimport type { Props } from './props'\r\n\r\nexport const H1 = 'HEADINGS/HEADING-ONE'\r\nexport const H2 = 'HEADINGS/HEADING-TWO'\r\nexport const H3 = 'HEADINGS/HEADING-THREE'\r\nexport const H4 = 'HEADINGS/HEADING-FOUR'\r\nexport const H5 = 'HEADINGS/HEADING-FIVE'\r\nexport const H6 = 'HEADINGS/HEADING-SIX'\r\n\r\nconst createNode = (type: string, el: any, next: any) => ({\r\n  object: 'block',\r\n  type,\r\n  // data: Data.create({ style: el.attribs.style }),\r\n  nodes: next(el.childNodes)\r\n})\r\n\r\nexport default class HeadingsPlugin extends Plugin {\r\n  constructor(props: Props) {\r\n    super(props)\r\n\r\n    this.DEFAULT_NODE = props.DEFAULT_NODE\r\n  }\r\n\r\n  props: Props\r\n\r\n  // eslint-disable-next-line react/display-name\r\n  createButton = (type, icon) => ({ editorState, onChange }: Props) => {\r\n    const onClick = e => {\r\n      e.preventDefault()\r\n\r\n      const isActive = editorState.blocks.some(block => block.type === type)\r\n\r\n      onChange({\r\n        value: editorState\r\n          .change()\r\n          .setBlocks(isActive ? this.DEFAULT_NODE : type).value\r\n      })\r\n    }\r\n\r\n    const isActive = editorState.blocks.some(block => block.type === type)\r\n\r\n    return <ToolbarButton onClick={onClick} isActive={isActive} icon={icon} />\r\n  }\r\n\r\n  name = 'headings'\r\n\r\n  schema = {\r\n    nodes: {\r\n      [H1]: makeTagNode('h1'),\r\n      [H2]: makeTagNode('h2'),\r\n      [H3]: makeTagNode('h3'),\r\n      [H4]: makeTagNode('h4'),\r\n      [H5]: makeTagNode('h5'),\r\n      [H6]: makeTagNode('h6')\r\n    }\r\n  }\r\n\r\n  toolbarButtons = [\r\n    this.createButton(H1, <H1Icon />),\r\n    this.createButton(H2, <H2Icon />),\r\n    this.createButton(H3, <H3Icon />),\r\n    this.createButton(H4, <H4Icon />),\r\n    this.createButton(H5, <H5Icon />),\r\n    this.createButton(H6, <H6Icon />)\r\n  ]\r\n\r\n  deserialize = (el, next) => {\r\n    switch (el.tagName.toLowerCase()) {\r\n      case 'h1':\r\n        return createNode(H1, el, next)\r\n      case 'h2':\r\n        return createNode(H2, el, next)\r\n      case 'h3':\r\n        return createNode(H3, el, next)\r\n      case 'h4':\r\n        return createNode(H4, el, next)\r\n      case 'h5':\r\n        return createNode(H5, el, next)\r\n      case 'h6':\r\n        return createNode(H6, el, next)\r\n    }\r\n  }\r\n\r\n  serialize = (\r\n    object: { type: string, object: string, data: any },\r\n    children: any[]\r\n  ) => {\r\n    if (object.object !== 'block') {\r\n      return\r\n    }\r\n    const style = { textAlign: object.data.get('align') }\r\n\r\n    switch (object.type) {\r\n      case H1:\r\n        return <h1 style={style}>{children}</h1>\r\n      case H2:\r\n        return <h2 style={style}>{children}</h2>\r\n      case H3:\r\n        return <h3 style={style}>{children}</h3>\r\n      case H4:\r\n        return <h4 style={style}>{children}</h4>\r\n      case H5:\r\n        return <h5 style={style}>{children}</h5>\r\n      case H6:\r\n        return <h6 style={style}>{children}</h6>\r\n    }\r\n  }\r\n\r\n  renderNode = props => {\r\n    const { children } = props\r\n    const style = { textAlign: props.node.data.get('align') }\r\n    switch (props.node.type) {\r\n      case H1:\r\n        return <h1 style={style}>{children}</h1>\r\n      case H2:\r\n        return <h2 style={style}>{children}</h2>\r\n      case H3:\r\n        return <h3 style={style}>{children}</h3>\r\n      case H4:\r\n        return <h4 style={style}>{children}</h4>\r\n      case H5:\r\n        return <h5 style={style}>{children}</h5>\r\n      case H6:\r\n        return <h6 style={style}>{children}</h6>\r\n    }\r\n  }\r\n}\r\n"]}
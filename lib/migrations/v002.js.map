{"version":3,"sources":["../../src/migrations/v002.js"],"names":["migration","Migration","toVersion","fromVersionRange","migrate","state","serialized","document","key"],"mappings":";;;;;;AAAA;;AACA;;;;;;AACA,IAAMA,YAAY,IAAIC,kBAAJ,CAAc;AAC9BC,aAAW,OADmB;AAE9BC,oBAAkB,QAFY;AAG9BC,WAAS,wBAAS;AAChB;AACAC,8BACKA,KADL,EAEMA,MAAMC,UAAN,GACA,EAAEA,YAAY,EAAEC,UAAUF,MAAMC,UAAlB,EAAd,EADA,GAEA,EAJN;AAMA;AACAD,YAAQ,8BAAOA,KAAP,EAAc,eAAO;AAC3B,cAAQG,GAAR;AACE,aAAK,MAAL;AACE,iBAAO,QAAP;AACF,aAAK,QAAL;AACE,iBAAO,QAAP;AACF;AACE,iBAAOA,GAAP;AANJ;AAQD,KATO,CAAR;AAUA,WAAOH,KAAP;AACD;AAvB6B,CAAd,CAAlB;;kBA0BeL,S","file":"v002.js","sourcesContent":["import { Migration } from 'ory-editor-core/lib/service/plugin/classes'\r\nimport rename from 'deep-rename-keys'\r\nconst migration = new Migration({\r\n  toVersion: '0.0.2',\r\n  fromVersionRange: '^0.0.1',\r\n  migrate: state => {\r\n    // wrap with document\r\n    state = {\r\n      ...state,\r\n      ...(state.serialized\r\n        ? { serialized: { document: state.serialized } }\r\n        : {})\r\n    }\r\n    // rename keys\r\n    state = rename(state, key => {\r\n      switch (key) {\r\n        case 'kind':\r\n          return 'object'\r\n        case 'ranges':\r\n          return 'leaves'\r\n        default:\r\n          return key\r\n      }\r\n    })\r\n    return state\r\n  }\r\n})\r\n\r\nexport default migration\r\n"]}